<img src="https://tva1.sinaimg.cn/large/0082zybply1gc6o1gu4o6j31220u042b.jpg" alt="JVM内存" style="zoom:50%;" />



<img src="https://tva1.sinaimg.cn/large/0082zybply1gc6ocbkosej30rm0jsjsk.jpg" alt="img" style="zoom:100%;" />

#### 1. 程序计数器

程序计数器是一块较小的内存空间，他可以被看作是当前线程所执行的，行号指示器。

> 在java虚拟机的概念模型里，字节码(class文件)解释器工作时，就是通过改变这个计数器的值，来选取下一条需要执行的字节码指令。



#### 2. Java虚拟机栈

虚拟机栈，描述的是Java方法执行的线程内存模型：

每个方法被执行的时候，Java虚拟机都会同步创建一个 **栈帧** 。

<img src="https://tva1.sinaimg.cn/large/0082zybply1gc6oblv7c8j30o10cw44j.jpg" alt="屏幕快照 2020-02-23 下午9.51.14" style="zoom:50%;" />

用于存储 

- 局部变量表
  - 存放了编译器可知的，各种Java虚拟机 基本类型，对象引用，和 returnAddress 类型（执行一条字节码指令的地址）
- 操作数栈
- 指向运行时常量池的引用 :
  - 存储程序执行时可能用到常量的引用。
- 方法返回地址 
  - 存储方法执行完成后的返回地址。

每个方法被调用，直至执行完毕的过程，对应着一个栈帧在虚拟机栈中，从入栈到出栈的过程。



#### 3. 本地方法栈

本地方法栈，与虚拟机栈所发挥的作用是非常相似的，其区别只是虚拟机栈为虚拟机执行Java方法 （也就是字节码）服务，而本地方法栈则是为虚拟机使用到的本地（Native）方法服务。



#### 4. Java堆

Java堆是所有线程共享的一块内存区域。也是虚拟机管理的内存中，最大的一块。

Java堆唯一的用处是，存放对象实例，Java世界里“几乎”所有的对象实例都在这里分配内存。

《Java虚拟机规范》中对Java堆的描述：**所有对象的示例以及数组都应当在对上分配**



#### 5. 方法区

方法区也是各个线程共享的内存区域。

它用于存储，已被虚拟机加载的类型信息、常量、静态变量、即时编译器编译后的代码缓存等数据。

##### 5.1 运行时常量池

运行时常量池，是方法区的一部分。

Class文件中，除了有 **类的版本、字段、方法、接口等** 描述信息外，还有一项信息是 **常量池表**，用于存放**编译器生成的各种字面量与符号引用**，这部分内容将在类加载之后，存放到方法区的 **运行时常量池** 中。





#### 6. 引用

[这一次，彻底解决Java的值传递和引用传递](https://juejin.im/post/5bce68226fb9a05ce46a0476)